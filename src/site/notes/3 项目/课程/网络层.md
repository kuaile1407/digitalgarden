---
{"time":["2024-01-03 周三"],"aliases":null,"genre":"笔记","cards-deck":null,"tags":["课程/专业必修课"],"key":"期末复习","dg-publish":true,"permalink":"/3 项目/课程/网络层/","dgPassFrontmatter":true,"noteIcon":"","created":"2024-01-02T23:51:47.480+08:00","updated":"2024-01-04T02:43:04.000+08:00"}
---

## 基础概念

### 网络层作用

==网络层提供**端到端**服务==，网络层的目的是实现两个端系统之间的透明传输，具体功能包括寻址和路由选择，连接的建立、保持和终止等。他提供的服务使[[3 项目/课程/运输层\|运输层]]不需要了解网络中的数据传输和交换技术。

分组是网络层单位，报文时[[3 项目/课程/运输层\|运输层]]单位。

### 网际层协议IP

- ARP地址解析协议：根据IP地址获取物理地址。
- RARP反地址解析协议
- ICMP网际控制报文协议：通过CMP传输控制信息，控制信息是指网络通不通，主机是否可达，路由是否可用等网络本身的消息。例如ping
- IGMP网际组管理协议：用于管理网路协议多播组成员的一种通信协议。IP主机和相邻的路由器利用IGMP来创建多播组的组成员。组播方式解决了单播情况下数据的重复拷贝及带宽的重复占用，也解决了广播方式下带宽资源的浪费。

## IP地址

### 概念

IP地址是IP协议提供的一种统一的地址格式，它为互联网上的每一个网络和每一台主机分配一个**逻辑地址**，以此来屏蔽物理地址的差异。

一个IP地址由4个字节，**32位组成**，一般用点分十进制方式表示。

>[!important] IP地址和MAC地址的区别
>1. IP地址是一个**逻辑地址**MAC地址是**物理地址**。
>2. MAC地址唯一，IP地址不唯一。
>3. MAC地址主要是工作在第二层，IP地址主要工作在网络层。
>4. MAC地址是**48位**的，IP地址一般位32位（IPV4），IPV6为128位。
>5. IP地址分配取决于网络拓扑，MAC地址分配取决于制造商。

### IP地址的组成

IP地址由主机地址和网络地址组成
- 主机地址/主机号：标识某一台设备的地址。
- 网络地址/网络号：标识某一个网段的地址。
- 子网掩码：用于区分网络号和主机号，子网掩码不能单独存在，必须结合IP地址一起使用。

### IP地址的分类

- A类
	- 第一个字节为网络号，后面三个字节为主机号，第一个字节的第一位是0
	- 范围1.0.0.1到127.255.255.254
	- 默认子网掩码：255.0.0.0——第一个字节全一，第一个字节为网络号
- B类
	- 前两个字节为网络号，后两个字节为主机号，第一个字节的前两位为10
	- 范围128.0.0.1-191.255.255.254
	- 默认子网掩码：255.255.0.0
- C类
	- 前三个字节为网络号，后一个字节为主机号，第一个字节的前三位为110
	- 范围：192.0.0.1到223.255.255.254
	- 默认子网掩码：255.255.255.0
- D类
	- 历史上叫做多播地址，即组播地址。多播地址的最高位必须是1110，范围从224.0.0.0到239.255.255.255
- E类：保留
- 特殊地址
	- 网络地址：主机号为全0时，即为网络地址。**主机号为全0的地址不可用**。
	- 广播地址：主机号为全1的地址。
	- 回环地址：127.0.0.1，用于测试其IP协议是否可用。

### IPV6

因为IPV4地址满足不了要求，出现了匮乏的情况，所以诞生了IPV6地址继续使用，IPV6地址由128位，16个字节组成，一般表现形式为16进制。

## 子网划分

### 概念

可以利用子网划分来**减少地址浪费**，即VLSM，可变长子网掩码。将一个大的有类网络，划分成若干个小的子网，使得IP地址的使用更加科学。

通过修改子网掩码，可以起到更加精细划分网络号和主机号的作用。

网络掩码为连续的1或连续的0，1的个数就是IP地址的网络号的位数，0的个数是IP地址的主机号的位数。

### 计算

子网划分越多，浪费越多（网络号）

>[!important] 子网划分
>划分后的每个子网每个子网的首个 IP 地址作为网络地址，最后一个 IP 地址作为广播地址，不能分配给主机使用。每个子网可用的 IP 地址数目为子网地址范围减去 2。等于 $2^{n}-2$ 。

## 网络层的路由

### 路由

==网络层最大的特点就是提供路由==。路由是网络层最主要的工作任务。

路由是指分组从源到目的地时，决定端到端路径的网络范围的进程，路由是指导报文转发的路径信息，通过路由可以确认转发IP报文的路径。

- 路由器
	- 网络层的基本设备
	- 数据转发
	- 一个端口代表一个网段，路由器中存放着通往各网段的表格，叫做路由表。

路由表/路由择域信息库是一个储存路由器或联网计算机的电子表格或类数据库。路由表储存着指向特定网络地址的路径。

>[!important] 网关
>- 网关用于不同的网段进行通信。
>- 网关既可以用于广域网互联，也可以用于局域网互联。

### 路由的获取方式

- 直连路由：路由器直接连了一个网段/端口。
- 静态路由：需要人工配置。
- 动态路由：不需要人规定。

## 路由的配置方式

### 静态路由

- 由管理员手工配置，配置方便，对系统要求低，适用于拓扑结构简单稳定的小型网络。
- 缺省/默认路由（静态路由的一种）：不知道去哪个网段，默认方向。用于末梢网段的优化。

### 动态路由

通过动态路由协议来实现不同网段的路由互通。

动态路由协议由自己的路由算法，能够自动适应网络拓扑的变化，适用于有一定数量的三层设备的网络。

### 动态路由协议

- **RIP\*** 
	- RIP(路由信息协议)：V2版本才支持VLSM，V1版本只区分A B C 三类。
	- ==基于矢量（跳数）的动态路由协议==。
	- 适用于中小规模网络拓扑，**最大跳数为15**。
- **OSPF\***:
	- OSPF：开放式最短路径优先。
	- ==基于链路状态的协议==。
	- 使用SPF算法计算最短路径，树形协议，**天生防环状结构**。
- BGP
	- 自治系统间的路由协议
- IS-IS
	- 内部网关协议

>[!important] RIP和OSPF的区别
>1. RIP是基于矢量的协议，OSPF基于链路状态。
>2. RIP适用于中小型网络拓扑，OSPF适用于较大规模网络。
>3. OSPF的收敛速度比RIP更快。
>4. OSPF防环，RIP不防环。

